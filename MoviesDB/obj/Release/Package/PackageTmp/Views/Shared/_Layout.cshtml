<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - My ASP.NET Application</title>
    @*@Styles.Render("~/Content/css")*@
    <link href="~/Content/bootstrap.css" rel="stylesheet" />
    <link href="~/Content/OwlCarousel2-2.3.4-css/owl.carousel.css" rel="stylesheet" />
    <link href="~/Content/magnific-popup.css" rel="stylesheet" />
    <link href="~/Content/select2.min.css" rel="stylesheet" />
    <link href="~/Content/admin.css" rel="stylesheet" />
    @Scripts.Render("~/bundles/modernizr")
</head>
<body>

       <div class="mfp-bg my-mfp-zoom-in mfp-ready" id ="popup1" hidden="true"></div>
<div class="mfp-wrap mfp-close-btn-in mfp-auto-cursor my-mfp-zoom-in mfp-ready" id = "popup2" tabindex="-1" style="overflow: hidden auto;" hidden="true">
  <div class="mfp-container mfp-inline-holder">
    <div class="mfp-content">
      <div id="modal-status" class="zoom-anim-dialog modal">
        <h6 class="modal__title">Status change</h6>
        <p class="modal__text">Are you sure you want to immediately change the status?</p>
        <div class="modal__btns">
          <button class="modal__btn modal__btn--apply" type="button">Apply</button>
          <button class="modal__btn modal__btn--dismiss cancel-button" type="button">Dismiss</button>
        </div>
        <button title="Close (Esc)" type="button" class="mfp-close">×</button>
      </div>
    </div>
  </div>
</div>
 
    <!-- header -->
    <header class="header">
        <div class="header__content">
            <!-- header logo -->
            <a href="index.html" class="header__logo">
                <img src="~/Content/images/user.svg" alt="">
            </a>
            <!-- end header logo -->
            <!-- header menu btn -->
            <button class="header__btn" type="button">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <!-- end header menu btn -->
        </div>
    </header>
    <!-- end header -->
    <!-- sidebar -->
    <div class="sidebar">
        <!-- sidebar logo -->
        <a href="@Url.Action("_AllUsers", "Account")" class="sidebar__logo">
            <img src="img/logo.svg" alt="">
        </a>
        <!-- end sidebar logo -->
        <!-- sidebar user -->
        <div class="sidebar__user">
            <div class="sidebar__user-img">
                <img src="~/Content/images/user.svg" alt="">
            </div>

            <div class="sidebar__user-title">
                <span> @Session["UserRole"]</span>
                <p>@Session["UserName"]</p>
            </div>
            <button class="sidebar__user-btn" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4,12a1,1,0,0,0,1,1h7.59l-2.3,2.29a1,1,0,0,0,0,1.42,1,1,0,0,0,1.42,0l4-4a1,1,0,0,0,.21-.33,1,1,0,0,0,0-.76,1,1,0,0,0-.21-.33l-4-4a1,1,0,1,0-1.42,1.42L12.59,11H5A1,1,0,0,0,4,12ZM17,2H7A3,3,0,0,0,4,5V8A1,1,0,0,0,6,8V5A1,1,0,0,1,7,4H17a1,1,0,0,1,1,1V19a1,1,0,0,1-1,1H7a1,1,0,0,1-1-1V16a1,1,0,0,0-2,0v3a3,3,0,0,0,3,3H17a3,3,0,0,0,3-3V5A3,3,0,0,0,17,2Z" /></svg>
            </button>
        </div>
        <!-- end sidebar user -->
        <!-- sidebar nav -->
        <ul class="sidebar__nav">
            @*<li class="sidebar__nav-item">
                    <a href="index.html" class="sidebar__nav-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20,8h0L14,2.74a3,3,0,0,0-4,0L4,8a3,3,0,0,0-1,2.26V19a3,3,0,0,0,3,3H18a3,3,0,0,0,3-3V10.25A3,3,0,0,0,20,8ZM14,20H10V15a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1Zm5-1a1,1,0,0,1-1,1H16V15a3,3,0,0,0-3-3H11a3,3,0,0,0-3,3v5H6a1,1,0,0,1-1-1V10.25a1,1,0,0,1,.34-.75l6-5.25a1,1,0,0,1,1.32,0l6,5.25a1,1,0,0,1,.34.75Z" /></svg> <span>Dashboard</span></a>
                </li>*@

            @* Movies List *@
            <li class="sidebar__nav-item">
                <a id="allMoviesButton" class="sidebar__nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10,13H3a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1h7a1,1,0,0,0,1-1V14A1,1,0,0,0,10,13ZM9,20H4V15H9ZM21,2H14a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1h7a1,1,0,0,0,1-1V3A1,1,0,0,0,21,2ZM20,9H15V4h5Zm1,4H14a1,1,0,0,0-1,1v7a1,1,0,0,0,1,1h7a1,1,0,0,0,1-1V14A1,1,0,0,0,21,13Zm-1,7H15V15h5ZM10,2H3A1,1,0,0,0,2,3v7a1,1,0,0,0,1,1h7a1,1,0,0,0,1-1V3A1,1,0,0,0,10,2ZM9,9H4V4H9Z" /></svg>
                    <span>Catalog</span>
                </a>
            </li>

            <!-- collapse -->
            @*<li class="sidebar__nav-item">
                    <a class="sidebar__nav-link" data-toggle="collapse" href="#collapseMenu" role="button" aria-expanded="false" aria-controls="collapseMenu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19,5.5H12.72l-.32-1a3,3,0,0,0-2.84-2H5a3,3,0,0,0-3,3v13a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3V8.5A3,3,0,0,0,19,5.5Zm1,13a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V5.5a1,1,0,0,1,1-1H9.56a1,1,0,0,1,.95.68l.54,1.64A1,1,0,0,0,12,7.5h7a1,1,0,0,1,1,1Z" /></svg> <span>Pages</span> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,9.17a1,1,0,0,0-1.41,0L12,12.71,8.46,9.17a1,1,0,0,0-1.41,0,1,1,0,0,0,0,1.42l4.24,4.24a1,1,0,0,0,1.42,0L17,10.59A1,1,0,0,0,17,9.17Z" /></svg></a>

                    <ul class="collapse sidebar__menu" id="collapseMenu">
                        <li><a href="add-item.html">Add item</a></li>
                        <li><a href="edit-user.html">Edit user</a></li>
                        <li><a href="signin.html">Sign in</a></li>
                        <li><a href="signup.html">Sign up</a></li>
                        <li><a href="forgot.html">Forgot password</a></li>
                        <li><a href="404.html">404 page</a></li>
                    </ul>
                </li>*@
            <!-- end collapse -->
            @**@
            @* Users *@
            <li class="sidebar__nav-item">
                <a id="allUsersButton" class="sidebar__nav-link ">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.3,12.22A4.92,4.92,0,0,0,14,8.5a5,5,0,0,0-10,0,4.92,4.92,0,0,0,1.7,3.72A8,8,0,0,0,1,19.5a1,1,0,0,0,2,0,6,6,0,0,1,12,0,1,1,0,0,0,2,0A8,8,0,0,0,12.3,12.22ZM9,11.5a3,3,0,1,1,3-3A3,3,0,0,1,9,11.5Zm9.74.32A5,5,0,0,0,15,3.5a1,1,0,0,0,0,2,3,3,0,0,1,3,3,3,3,0,0,1-1.5,2.59,1,1,0,0,0-.5.84,1,1,0,0,0,.45.86l.39.26.13.07a7,7,0,0,1,4,6.38,1,1,0,0,0,2,0A9,9,0,0,0,18.74,11.82Z" /></svg>
                    <span>Users</span>
                </a>
            </li>


            <li class="sidebar__nav-item">
                <a href="@Url.Action("Index","Moives")" class="sidebar__nav-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,11H9.41l3.3-3.29a1,1,0,1,0-1.42-1.42l-5,5a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l5,5a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L9.41,13H17a1,1,0,0,0,0-2Z" /></svg> <span>Back to MoviesDB</span></a>
            </li>
        </ul>
        <!-- end sidebar nav -->
    </div>
    <!-- end sidebar -->
    <div id="content">
        @RenderBody()
    </div>

    <!-- end modal status -->
    <!-- JS -->
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")
    @RenderSection("scripts", required: false)
    <script>


            $(document).ready(function () {
           //show the popup message that added above, if clicked apply then do the action if not cancel and hide the popup message

                $('.activate-user').click(function (e) {
                    e.preventDefault();
                    var url = $(this).attr('href');
                    $('#modal-status').modal('show');
                    $('#modal-status').on('click', '#apply', function (e) {
                        e.preventDefault();
                        $.ajax({
                            url: url,
                            type: 'POST',
                            success: function (result) {
                                $('#modal-status').modal('hide');
                                $('#content').html(result);
                            },
                            error: function () {
                                // Handle error
                            }
                        });
                    });
                    $('#modal-status').on('click', '#cancel', function (e) {
                        e.preventDefault();
                        $('#modal-status').modal('hide');
                    });
                });
            });

         });


        $(document).ready(function() {
            $('#allMoviesButton').click(function() {
                $.ajax({
                    url: '@Url.Action("_GetAllMovies")',
                    type: 'GET',
                    success: function(result) {
                        $('#content').html(result);
                    },
                    error: function() {
                        // Handle error
                    }
                });
            });
        });
        $(document).ready(function() {
            $('#allUsersButton').click(function() {
                $.ajax({
                    url: '@Url.Action("_AllUsers")',
                    type: 'GET',
                    success: function(result) {
                        $('#content').html(result);
                    },
                    error: function() {
                        // Handle error
                    }
                });
            });
        });

        //when click on the button, change the color of the button to blue (only the icon and the text)

        $(document).ready(function() {
            $('#allMoviesButton').click(function() {
                $('#allMoviesButton').css('color', 'blue');
            });
        });

        $(document).ready(function() {
            $('#allUsersButton').click(function() {
                $('#allUsersButton').css('color', 'blue');
            });
        });

        //when ever the side item clicked, add class sidebar__nav-link--active to the <a> elements, and if the other elements clicked, romeve the class from the previous element and add it to the current element the active from the first one "

        $(document).ready(function() {
            $('.sidebar__nav-link').click(function() {
                $('.sidebar__nav-link').removeClass('sidebar__nav-link--active');
                $(this).addClass('sidebar__nav-link--active');
            });
        });




    
         $(document).ready(function () {
        $('.activate-user').click(function (e) {
            <div class="mfp-bg my-mfp-zoom-in mfp-ready"></div>
            <div class="mfp-wrap mfp-close-btn-in mfp-auto-cursor my-mfp-zoom-in mfp-ready" tabindex="-1" style="overflow: hidden auto;"><div class="mfp-container mfp-inline-holder"><div class="mfp-content"><div id="modal-status" class="zoom-anim-dialog modal">
		<h6 class="modal__title">Status change</h6>

		<p class="modal__text">Are you sure about immediately change status?</p>

		<div class="modal__btns">
			<button class="modal__btn modal__btn--apply" type="button">Apply</button>
			<button class="modal__btn modal__btn--dismiss" type="button">Dismiss</button>
		</div>
	<button title="Close (Esc)" type="button" class="mfp-close">×</button></div></div></div></div>
            // If the admin clicks "Yes," perform the action
            if (confirmation) {
                console.log("test");
                var userId = $(this).data("userid");
                var isActivated = $(this).data("isactivated");
                $.ajax({
                    url: '@Url.Action("ActivateOrDeactivateUser", "Account")',
                    type: 'POST',
                    data: { userId: userId, isActivated: isActivated },
                    success: function (response) {
                        location.reload(); // Refresh the page
                    },
                    error: function (xhr, status, error) {
                        alert('Error activating user: ' + error);
                    }
                });
            }
        });
    });

    @* const activeUserBtn = document.getElementById('activeuserbtn');
const popup = document.getElementById('popup');

activeUserBtn.addEventListener('click', function() {
  popup.style.display = 'block'; // show the popup
});

// hide the popup when the cancel button or close icon is clicked
const cancelBtn = document.querySelector('.popup__btn--cancel');
const closeIcon = document.querySelector('.popup__close');

cancelBtn.addEventListener('click', function() {
  popup.style.display = 'none'; // hide the popup
});

closeIcon.addEventListener('click', function() {
  popup.style.display = 'none'; // hide the popup
});         *@

      

        



    document.getElementById('activeuserbtn').onclick = function() {
        //let hidden value in popup1 and popup2 false and show the popup

        document.getElementById('popup1').style.display = 'block';
        document.getElementById('popup2').style.display = 'block';
        document.getElementById('popup1').style.hidden = 'false';
        document.getElementById('popup2').style.hidden = 'false';


    }



$(document).ready(function () {
         $('.activate-user').click(function () {
             console.log("activate btn");
    // Show the modal dialog box
    document.getElementById('popup1').style.hidden = 'false';
    document.getElementById('popup2').style.hidden = 'false';

    // Send AJAX request to the Account Controller when the "Apply" button is clicked
    $('.modal__btn--apply').click(function() {
      var userId = $(this).data("userid");
      var isActivated = $(this).data("isactivated");
      $.ajax({
        url: '@Url.Action("ActivateOrDeactivateUser", "Account")',
        type: 'POST',
        data: { userId: userId, isActivated: isActivated },
        success: function (response) {
          // Refresh the page or perform any other necessary actions
          // alert('User activated successfully!');
          location.reload(); // Refresh the page
        },
        error: function (xhr, status, error) {
          // Handle error response here
          // For example, display an error message
          alert('Error activating user: ' + error);
        }
      });
    });

    // Hide the modal dialog box when the "Dismiss" button is clicked
    $('.cancel-button').click(function() {
      $('#popup1, #popup2').hide();
    });
  });
});
       



    </script>



</body>
</html>
